"use client";

import React from "react";
import Link from "next/link";
import { usePathname } from "next/navigation";

/* ================= NAV ITEMS ================= */
const navItems = [
    {
        name: "Dashboard", path: "/myprofile", icon: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-grid" viewBox="0 0 16 16">
            <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5z" />
        </svg>
    },
    { name: "Profile", path: "/myprofile/profile", icon: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M470.5 463.6C451.4 416.9 405.5 384 352 384L288 384C234.5 384 188.6 416.9 169.5 463.6C133.9 426.3 112 375.7 112 320C112 205.1 205.1 112 320 112C434.9 112 528 205.1 528 320C528 375.7 506.1 426.2 470.5 463.6zM430.4 496.3C398.4 516.4 360.6 528 320 528C279.4 528 241.6 516.4 209.5 496.3C216.8 459.6 249.2 432 288 432L352 432C390.8 432 423.2 459.6 430.5 496.3zM320 576C461.4 576 576 461.4 576 320C576 178.6 461.4 64 320 64C178.6 64 64 178.6 64 320C64 461.4 178.6 576 320 576zM320 304C297.9 304 280 286.1 280 264C280 241.9 297.9 224 320 224C342.1 224 360 241.9 360 264C360 286.1 342.1 304 320 304zM232 264C232 312.6 271.4 352 320 352C368.6 352 408 312.6 408 264C408 215.4 368.6 176 320 176C271.4 176 232 215.4 232 264z" /></svg> },
    { name: "Interests", path: "/myprofile/interests", icon: <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17" fill="none"> <path d="M0 7.875L4.375 0L8.75 7.875H0ZM4.375 16.625C3.4125 16.625 2.58854 16.2823 1.90313 15.5969C1.21771 14.9115 0.875 14.0875 0.875 13.125C0.875 12.1479 1.21771 11.3202 1.90313 10.6417C2.58854 9.96333 3.4125 9.62442 4.375 9.625C5.3375 9.62558 6.16146 9.96829 6.84687 10.6531C7.53229 11.338 7.875 12.1619 7.875 13.125C7.875 14.0881 7.53229 14.912 6.84687 15.5969C6.16146 16.2817 5.3375 16.6244 4.375 16.625ZM4.375 14.875C4.85625 14.875 5.26808 14.7038 5.6105 14.3614C5.95292 14.019 6.12442 13.6068 6.125 13.125C6.12558 12.6432 5.95438 12.2313 5.61137 11.8895C5.26837 11.5477 4.85625 11.3762 4.375 11.375C3.89375 11.3738 3.48192 11.5453 3.1395 11.8895C2.79708 12.2337 2.62558 12.6455 2.625 13.125C2.62442 13.6045 2.79592 14.0166 3.1395 14.3614C3.48308 14.7061 3.89492 14.8773 4.375 14.875ZM2.975 6.125H5.775L4.375 3.60938L2.975 6.125ZM9.625 16.625V9.625H16.625V16.625H9.625ZM11.375 14.875H14.875V11.375H11.375V14.875ZM13.125 7.875C12.2937 7.175 11.5975 6.58438 11.0364 6.10313C10.4752 5.62188 10.0266 5.19896 9.69063 4.83437C9.35462 4.46979 9.114 4.12708 8.96875 3.80625C8.8235 3.48542 8.75058 3.14271 8.75 2.77813C8.75 2.12188 8.97983 1.56771 9.4395 1.11563C9.89917 0.663542 10.4714 0.4375 11.1562 0.4375C11.55 0.4375 11.9184 0.528792 12.2614 0.711375C12.6044 0.893958 12.8923 1.14538 13.125 1.46562C13.3583 1.14479 13.6465 0.893375 13.9895 0.711375C14.3325 0.529375 14.7006 0.438083 15.0938 0.4375C15.7792 0.4375 16.3517 0.663542 16.8114 1.11563C17.271 1.56771 17.5006 2.12188 17.5 2.77813C17.5 3.14271 17.4271 3.48542 17.2812 3.80625C17.1354 4.12708 16.8948 4.46979 16.5594 4.83437C16.224 5.19896 15.7757 5.62188 15.2145 6.10313C14.6533 6.58438 13.9568 7.175 13.125 7.875ZM13.125 5.57812C14.175 4.70312 14.875 4.08333 15.225 3.71875C15.575 3.35417 15.75 3.05521 15.75 2.82187C15.75 2.63229 15.6955 2.47917 15.5864 2.3625C15.4773 2.24583 15.3277 2.1875 15.1375 2.1875C14.9917 2.1875 14.8493 2.22746 14.7105 2.30737C14.5717 2.38729 14.4005 2.52962 14.1969 2.73438L13.125 3.7625L12.0531 2.73438C11.849 2.53021 11.6777 2.38788 11.5395 2.30737C11.4012 2.22688 11.2589 2.18692 11.1125 2.1875C10.9229 2.1875 10.7736 2.24583 10.6645 2.3625C10.5554 2.47917 10.5006 2.63229 10.5 2.82187C10.5 3.05521 10.675 3.35417 11.025 3.71875C11.375 4.08333 12.075 4.70312 13.125 5.57812Z" fill="black" /> </svg> },
    { name: "Preference", path: "/myprofile/partnerpreference", icon: <svg xmlns="http://www.w3.org/2000/svg" width="18" height="17" viewBox="0 0 18 17" fill="none"> <path d="M0 7.875L4.375 0L8.75 7.875H0ZM4.375 16.625C3.4125 16.625 2.58854 16.2823 1.90313 15.5969C1.21771 14.9115 0.875 14.0875 0.875 13.125C0.875 12.1479 1.21771 11.3202 1.90313 10.6417C2.58854 9.96333 3.4125 9.62442 4.375 9.625C5.3375 9.62558 6.16146 9.96829 6.84687 10.6531C7.53229 11.338 7.875 12.1619 7.875 13.125C7.875 14.0881 7.53229 14.912 6.84687 15.5969C6.16146 16.2817 5.3375 16.6244 4.375 16.625ZM4.375 14.875C4.85625 14.875 5.26808 14.7038 5.6105 14.3614C5.95292 14.019 6.12442 13.6068 6.125 13.125C6.12558 12.6432 5.95438 12.2313 5.61137 11.8895C5.26837 11.5477 4.85625 11.3762 4.375 11.375C3.89375 11.3738 3.48192 11.5453 3.1395 11.8895C2.79708 12.2337 2.62558 12.6455 2.625 13.125C2.62442 13.6045 2.79592 14.0166 3.1395 14.3614C3.48308 14.7061 3.89492 14.8773 4.375 14.875ZM2.975 6.125H5.775L4.375 3.60938L2.975 6.125ZM9.625 16.625V9.625H16.625V16.625H9.625ZM11.375 14.875H14.875V11.375H11.375V14.875ZM13.125 7.875C12.2937 7.175 11.5975 6.58438 11.0364 6.10313C10.4752 5.62188 10.0266 5.19896 9.69063 4.83437C9.35462 4.46979 9.114 4.12708 8.96875 3.80625C8.8235 3.48542 8.75058 3.14271 8.75 2.77813C8.75 2.12188 8.97983 1.56771 9.4395 1.11563C9.89917 0.663542 10.4714 0.4375 11.1562 0.4375C11.55 0.4375 11.9184 0.528792 12.2614 0.711375C12.6044 0.893958 12.8923 1.14538 13.125 1.46562C13.3583 1.14479 13.6465 0.893375 13.9895 0.711375C14.3325 0.529375 14.7006 0.438083 15.0938 0.4375C15.7792 0.4375 16.3517 0.663542 16.8114 1.11563C17.271 1.56771 17.5006 2.12188 17.5 2.77813C17.5 3.14271 17.4271 3.48542 17.2812 3.80625C17.1354 4.12708 16.8948 4.46979 16.5594 4.83437C16.224 5.19896 15.7757 5.62188 15.2145 6.10313C14.6533 6.58438 13.9568 7.175 13.125 7.875ZM13.125 5.57812C14.175 4.70312 14.875 4.08333 15.225 3.71875C15.575 3.35417 15.75 3.05521 15.75 2.82187C15.75 2.63229 15.6955 2.47917 15.5864 2.3625C15.4773 2.24583 15.3277 2.1875 15.1375 2.1875C14.9917 2.1875 14.8493 2.22746 14.7105 2.30737C14.5717 2.38729 14.4005 2.52962 14.1969 2.73438L13.125 3.7625L12.0531 2.73438C11.849 2.53021 11.6777 2.38788 11.5395 2.30737C11.4012 2.22688 11.2589 2.18692 11.1125 2.1875C10.9229 2.1875 10.7736 2.24583 10.6645 2.3625C10.5554 2.47917 10.5006 2.63229 10.5 2.82187C10.5 3.05521 10.675 3.35417 11.025 3.71875C11.375 4.08333 12.075 4.70312 13.125 5.57812Z" fill="black" /> </svg> },
    { name: "Chat list", path: "/myprofile/chatlist", icon: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M64 304C64 358.4 83.3 408.6 115.9 448.9L67.1 538.3C65.1 542 64 546.2 64 550.5C64 564.6 75.4 576 89.5 576C93.5 576 97.3 575.4 101 573.9L217.4 524C248.8 536.9 283.5 544 320 544C461.4 544 576 436.5 576 304C576 171.5 461.4 64 320 64C178.6 64 64 171.5 64 304zM158 471.9C167.3 454.8 165.4 433.8 153.2 418.7C127.1 386.4 112 346.8 112 304C112 200.8 202.2 112 320 112C437.8 112 528 200.8 528 304C528 407.2 437.8 496 320 496C289.8 496 261.3 490.1 235.7 479.6C223.8 474.7 210.4 474.8 198.6 479.9L140 504.9L158 471.9zM208 336C225.7 336 240 321.7 240 304C240 286.3 225.7 272 208 272C190.3 272 176 286.3 176 304C176 321.7 190.3 336 208 336zM352 304C352 286.3 337.7 272 320 272C302.3 272 288 286.3 288 304C288 321.7 302.3 336 320 336C337.7 336 352 321.7 352 304zM432 336C449.7 336 464 321.7 464 304C464 286.3 449.7 272 432 272C414.3 272 400 286.3 400 304C400 321.7 414.3 336 432 336z" /></svg> },
    { name: "Shortlisted", path: "/myprofile/shortlist", icon: <svg xmlns="http://www.w3.org/2000/svg" width="18" height="11" viewBox="0 0 18 11" fill="none"> <path d="M11.9167 8.66667C12.8194 8.66667 13.5868 8.35069 14.2187 7.71875C14.8507 7.0868 15.1667 6.31944 15.1667 5.41667C15.1667 4.51389 14.8507 3.74653 14.2187 3.11458C13.5868 2.48264 12.8194 2.16667 11.9167 2.16667C11.0139 2.16667 10.2465 2.48264 9.61458 3.11458C8.98264 3.74653 8.66667 4.51389 8.66667 5.41667C8.66667 6.31944 8.98264 7.0868 9.61458 7.71875C10.2465 8.35069 11.0139 8.66667 11.9167 8.66667ZM11.9167 10.8333C10.6167 10.8333 9.47014 10.4271 8.47708 9.61458C7.48403 8.80208 6.86111 7.76389 6.60833 6.5H2.16667V4.33333H6.60833C6.69861 3.93611 6.82067 3.55261 6.9745 3.18283C7.12833 2.81306 7.33128 2.47433 7.58333 2.16667H0V0H11.9167C13.4153 0 14.6929 0.528306 15.7495 1.58492C16.8061 2.64153 17.3341 3.91878 17.3333 5.41667C17.3326 6.91456 16.8043 8.19217 15.7484 9.2495C14.6925 10.3068 13.4153 10.8348 11.9167 10.8333Z" fill="black" /> </svg>, },
    { name: "Plan", path: "/myprofile/plan", icon: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M424 64C437.3 64 448 74.7 448 88L448 128L480 128C515.3 128 544 156.7 544 192L544 480C544 515.3 515.3 544 480 544L160 544C124.7 544 96 515.3 96 480L96 192C96 156.7 124.7 128 160 128L192 128L192 88C192 74.7 202.7 64 216 64C229.3 64 240 74.7 240 88L240 128L400 128L400 88C400 74.7 410.7 64 424 64zM160 176C151.2 176 144 183.2 144 192L144 480C144 488.8 151.2 496 160 496L480 496C488.8 496 496 488.8 496 480L496 192C496 183.2 488.8 176 480 176L160 176zM390.7 241.9C398.5 231.2 413.5 228.8 424.2 236.6C434.9 244.4 437.3 259.4 429.5 270.1L307.4 438.1C303.3 443.8 296.9 447.4 289.9 447.9C282.9 448.4 276 445.9 271.1 441L215.2 385.1C205.8 375.7 205.8 360.5 215.2 351.2C224.6 341.9 239.8 341.8 249.1 351.2L285.1 387.2L390.7 242z" /></svg> },
    { name: "Notification", path: "/myprofile/notification", icon: <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 64C306.7 64 296 74.7 296 88L296 97.7C214.6 109.3 152 179.4 152 264L152 278.5C152 316.2 142 353.2 123 385.8L101.1 423.2C97.8 429 96 435.5 96 442.2C96 463.1 112.9 480 133.8 480L506.2 480C527.1 480 544 463.1 544 442.2C544 435.5 542.2 428.9 538.9 423.2L517 385.7C498 353.1 488 316.1 488 278.4L488 263.9C488 179.3 425.4 109.2 344 97.6L344 87.9C344 74.6 333.3 63.9 320 63.9zM488.4 432L151.5 432L164.4 409.9C187.7 370 200 324.6 200 278.5L200 264C200 197.7 253.7 144 320 144C386.3 144 440 197.7 440 264L440 278.5C440 324.7 452.3 370 475.5 409.9L488.4 432zM252.1 528C262 556 288.7 576 320 576C351.3 576 378 556 387.9 528L252.1 528z" /></svg> },
    //     { name: "Setting", path: "/myprofile/setting", icon: <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" className="bi bi-gear" viewBox="0 0 16 16">
    //   <path d="M8 4.754a3.246 3.246 0 1 0 0 6.492 3.246 3.246 0 0 0 0-6.492M5.754 8a2.246 2.246 0 1 1 4.492 0 2.246 2.246 0 0 1-4.492 0"/>
    //   <path d="M9.796 1.343c-.527-1.79-3.065-1.79-3.592 0l-.094.319a.873.873 0 0 1-1.255.52l-.292-.16c-1.64-.892-3.433.902-2.54 2.541l.159.292a.873.873 0 0 1-.52 1.255l-.319.094c-1.79.527-1.79 3.065 0 3.592l.319.094a.873.873 0 0 1 .52 1.255l-.16.292c-.892 1.64.901 3.434 2.541 2.54l.292-.159a.873.873 0 0 1 1.255.52l.094.319c.527 1.79 3.065 1.79 3.592 0l.094-.319a.873.873 0 0 1 1.255-.52l.292.16c1.64.893 3.434-.902 2.54-2.541l-.159-.292a.873.873 0 0 1 .52-1.255l.319-.094c1.79-.527 1.79-3.065 0-3.592l-.319-.094a.873.873 0 0 1-.52-1.255l.16-.292c.893-1.64-.902-3.433-2.541-2.54l-.292.159a.873.873 0 0 1-1.255-.52zm-2.633.283c.246-.835 1.428-.835 1.674 0l.094.319a1.873 1.873 0 0 0 2.693 1.115l.291-.16c.764-.415 1.6.42 1.184 1.185l-.159.292a1.873 1.873 0 0 0 1.116 2.692l.318.094c.835.246.835 1.428 0 1.674l-.319.094a1.873 1.873 0 0 0-1.115 2.693l.16.291c.415.764-.42 1.6-1.185 1.184l-.291-.159a1.873 1.873 0 0 0-2.693 1.116l-.094.318c-.246.835-1.428.835-1.674 0l-.094-.319a1.873 1.873 0 0 0-2.692-1.115l-.292.16c-.764.415-1.6-.42-1.184-1.185l.159-.291A1.873 1.873 0 0 0 1.945 8.93l-.319-.094c-.835-.246-.835-1.428 0-1.674l.319-.094A1.873 1.873 0 0 0 3.06 4.377l-.16-.292c-.415-.764.42-1.6 1.185-1.184l.292.159a1.873 1.873 0 0 0 2.692-1.115z"/>
    // </svg>},
];

export default function Sidebar({ data }) {

    const pathname = usePathname();

    /* ========== ACTIVE LOGIC (IMPORTANT) ========== */
    const isActive = (path) => {
        const current = pathname.replace(/\/$/, "");
        const target = path.replace(/\/$/, "");

        if (target === "/myprofile") {
            return current === "/myprofile";
        }

        return current === target || current.startsWith(target + "/");
    };

    /* ========== LOGOUT ========== */
    const handleLogout = () => {
        localStorage.removeItem("token");
        window.location.href = "/dhakadweb/login";
    };

    return (
        <>
            {/* ================= MOBILE MENU ================= */}
            <ul className="nav nav-pills d-lg-none d-md-none d-flex justify-content-center sidebar-nav-mobile">
                {navItems.map((item) => (
                    <li key={item.name} className="nav-item m-1 custom-border rounded-1">
                        <Link
                            href={item.path}
                            className={`nav-link text-decoration-none ${isActive(item.path) ? "mobile-active" : "text-dark"
                                }`}
                        >
                            {item.name}
                        </Link>
                    </li>
                ))}

                <li className="nav-item m-1 custom-border rounded-1">
                    <button
                        onClick={handleLogout}
                        className="nav-link text-dark bg-transparent border-0"
                    >
                        Logout
                    </button>
                </li>
            </ul>


            {/* ================= DESKTOP SIDEBAR ================= */}
            <div className="sidebar-wrapper d-none d-lg-block d-md-block">
                <div className="sidebar-image-wrapper">
                    <img src={data?.photos?.[0] || "/dhakadweb/assets/images/dummy.png"} alt="" className="bg-blur" />
                    <img
                        src={data?.photos?.[0] || "/dhakadweb/assets/images/dummy.png"}
                        className="w-100 main-img"
                        alt="profile"
                    />
                </div>
                <nav className="sidebar-nav">
                    <ul className="nav-menu">
                        {navItems.map((item) => (
                            <li key={item.name} className="nav-item">
                                <Link
                                    href={item.path}
                                    className={`sidebar-link ${isActive(item.path) ? "active" : ""}`}
                                >
                                    <span className="nav-icon">{item.icon}</span>
                                    <span>{item.name}</span>
                                </Link>
                            </li>
                        ))}

                        <li className="nav-item">
                            <button onClick={handleLogout} className="sidebar-link logout border-0 bg-transparent">
                                <span className="nav-icon"><i className="fa-solid fa-right-from-bracket"></i></span>
                                Logout
                            </button>
                        </li>
                    </ul>
                </nav>
            </div>
        </>
    );
}
